<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Product</title>
  <link rel="stylesheet" href="/assets/css/editProduct.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</head>
<body>
  

  <div class="col-lg-12 col-xlg-12 col-md-12">
  <h2>Edit Product</h2>

    <div class="card border border-secondary">

      <div class="card-body">
      
        <form action="/admin/editProduct/<%= details._id%>" class="form-horizontal form-material" method="post" enctype="multipart/form-data">  >
          <div class="form-group">
            
            <label class="col-md-12">Name</label>
            <div class="col-md-12">
              <input type="text" name="name" class="form-control form-control-line" value=" <%= details.name %>">
            </div>
          </div>
          <div class="form-group">
            <label for="example-email" class="col-md-12">Brand</label>
            <div class="col-md-12">
              <input type="text" name="brand" class="form-control form-control-line" name="example-email" value=" <%= details.brand %>"
                id="example-email">
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-12">Category</label>
            <div class="col-sm-12">
              <select name="category" class="form-control form-control-line">
                <% catData.forEach(element=> { %>
                  <option selected value="<%= element._id %>">
                    <%= element.name %>
                  </option>
                  <% }); %>
              </select>
            </div>

          </div>
          <div class="form-group">
            <label class="col-md-12">Price</label>
            <div class="col-md-12">
              <input type="number" name="price" class="form-control form-control-line" value="<%= details.price %>">
            </div>
          </div>
          <div class="form-group">
            <label class="col-md-12">Stock</label>
            <div class="col-md-12">
              <input type="number" name="stock" class="form-control form-control-line" value="<%= details.stock %>" >
            </div>
          </div>

           <div class="form-group">
            <label class="col-md-12">Description</label>
            <div class="col-md-12">
              <textarea rows="10" name="description" class="form-control form-control-line" ><%= details.description%></textarea>
            </div>
          </div>

          <div class="form-group">
            <label class="col-md-12">Image</label>
            <div class="col-md-12">
              <div class="row">
                <div><img id="imgView" style="width:80px; height: 110px;" src="/uploads/<%=details.image[0] %>" alt=""></div>
                <div><img id="imgView1" style="width:80px; height: 110px;" src="/uploads/<%=details.image[1] %>" alt=""></div>
                <div><img id="imgView2" style="width:80px; height: 110px;" src="/uploads/<%=details.image[2] %>" alt=""></div>
                <div><img id="imgView3" style="width:80px; height: 110px;" src="/uploads/<%=details.image[3] %>" alt=""></div>
              </div>
              <br>
              <br>
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-whatever="@mdo">Edit Image</button>
            </div>
          </div>
          
          <br>
          <br>
          <div class="form-group">
            <div class="col-sm-12">
              <button type="submit" class="btn btn-success">Submit</button>
            </div>
          </div>
          
          <% if(typeof message !== 'undefined'){ %>
          <h5 style="color: rgb(224, 86, 86);">
            <%= message %>
          </h5>
          <% } %>
          
          </div>
          </div>
          </div>
          
          <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Product Image</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>



      <div><img id="imgView"   style="width:100px;" src="/uploads/<%=details.image[0] %>" alt=""><a style="background-color: rgb(150, 10, 10); color: azure;" class="btn btn-secondary ml-5"  href="/admin/deleteImage/<%= details._id %>/<%=details.image[0] %>"> Delete</a></div>
      <div><img id="imgView1"  style="width:100px;" src="/uploads/<%=details.image[1] %>" alt=""><a style="background-color: rgb(150, 10, 10); color: azure;"  class="btn btn-secondary ml-5" href="/admin/deleteImage/<%= details._id %>/<%=details.image[1] %>">Delete </a></div>
      <div><img id="imgView2"  style="width:100px;" src="/uploads/<%=details.image[2] %>" alt=""><a style="background-color: rgb(150, 10, 10); color: azure;"  class="btn btn-secondary ml-5" href="/admin/deleteImage/<%= details._id %>/<%=details.image[2] %>">Delete </a></div>
      <div><img id="imgView3"  style="width:100px;" src="/uploads/<%=details.image[3] %>" alt=""><a style="background-color: rgb(150, 10, 10); color: azure;"  class="btn btn-secondary ml-5" href="/admin/deleteImage/<%= details._id %>/<%=details.image[3] %>">Delete </a></div>
          
              <div class="modal-body">
                <div><img id="modalImgView" style="width:100px;" src="" alt=""></div>
                <form action="/admin/editImage/<%=details._id %>" method="post" enctype="multipart/form-data">
                  <div class="form-group">
                    <input type="file" multiple name="image" class="form-control form-control-line" onchange="viewImage(event)">
                  </div>
                  <button type="submit" class="btn btn-primary">Save Changes</button>
                </form>
              </div>
              <div class="modal-footer"></div>
            </div>
          </div>
          </div>
          
          <script>
          function viewImage(event) {
            var imgView = document.getElementById('imgView');
            var imgView1 = document.getElementById('imgView1');
            var imgView2 = document.getElementById('imgView2');
            var imgView3 = document.getElementById('imgView3');
            var modalImgView = document.getElementById('modalImgView');
          
            imgView.src = URL.createObjectURL(event.target.files[0]);
            imgView1.src = URL.createObjectURL(event.target.files[1]);
            imgView2.src = URL.createObjectURL(event.target.files[2]);
            imgView3.src = URL.createObjectURL(event.target.files[3]);
            modalImgView.src = URL.createObjectURL(event.target.files[0]);
          }
          </script>
          

</body>
</html>
